{"name":"Mega","tagline":"Node.js SDK for Mega (Unofficial)","body":"[![Build Status](https://secure.travis-ci.org/tonistiigi/mega.png)](http://travis-ci.org/tonistiigi/mega)\r\n\r\n## Read first\r\n\r\n- This is all unofficial, based on [developer guide](https://mega.co.nz/#developers) and site source.\r\n- Official SDK will probably be released in the future. You may want to wait.\r\n- Only part of the API is implemented.\r\n- Crypto is mostly ported from browser code and isn't optimal. Probably some of it could be done with openssl, [ursa](https://github.com/Obvious/ursa) or [cryptojs](https://github.com/gwjjeff/cryptojs.git) or the algorithms could at least be ported to use Buffer format, but this is no way a priority.\r\n- If you use it for something make sure you agree with Mega's [Terms of Service](https://mega.co.nz/#terms).\r\n\r\n\r\n## Installation\r\n\r\n```\r\nnpm install mega\r\n```\r\n\r\n```\r\nvar mega = require('mega')\r\n```\r\n\r\nSee examples directory for quick start.\r\n\r\n## Missing functionality\r\n\r\n- No sharing features\r\n- Missing file management: move, mkdir, symlink etc.\r\n\r\n## API\r\n\r\n### var storage = mega([options], [readyCallback])\r\n\r\nCreate new connection instance to Mega.\r\n\r\n**Supported options:**\r\n\r\n`email` - User login email.\r\n\r\n`password` - User password.\r\n\r\n`keepalive` - Keep connection open to receive server-to-client requests that will be mapped to events. Defaults to true.\r\n\r\n`autoload` - Load in file structure. Defaults to true.\r\n\r\n\r\nIf you don't specify email/password then temporary account will be created. Once connection closes for temporary account you cannot access same account again so you need to save a link to file. Temporary accounts regularly get deleted.\r\n\r\n**After `readyCallback()` or `ready` event fires storage has following properties:**\r\n\r\n`name` - Account owner name\r\n\r\n`key` - Account master key\r\n\r\n`rsaPrivateKey` - RSA private Key\r\n\r\n`sid` - Current session ID\r\n\r\n`files` - Hash of `File` objects by node ID-s.\r\n\r\n`root` - `File` object for Cloud Drive main directory\r\n\r\n`trash` - `File` object for Rubbish bin\r\n\r\n`inbox` - `File` object for Inbox\r\n\r\n`mounts` - Array of all top level directories\r\n\r\n### storage.upload(options | name, [buffer], [cb])\r\n\r\n```\r\nfs.createReadStream('myfile.txt').pipe(storage.upload('myfile.txt'))\r\n```\r\n\r\nUpload a file to Mega. You can pass in buffer data or just pipe data into it. Callback returns uploaded file object. If you don't specify callback you can listen for `complete` event to get the file handle.\r\n\r\n**Supported options:**\r\n\r\n`name` - File name *required*\r\n\r\n`attributes` - Object of file attributes.\r\n\r\n`size` - File size. Note that because Mega's API needs final data length before uploading can start, streaming only fully works if you specify the size of your data. Otherwise it needs to first buffer your data to determine the size.\r\n\r\n`target` - Target directory file object or node ID. Defaults to `storage.root`.\r\n\r\n\r\n\r\n### storage.reload(cb)\r\n\r\nReloads files tree. No need to call this if `autoload` is used.\r\n\r\n\r\n### Events:\r\n\r\nThese events fire on file changes when `keepalive` is used. The changes can be triggered from any session connected to the same account.\r\n\r\n`add` - New file/dir was added. Parameters: file.\r\n\r\n`move` - File was moved to another dir. Parameters: file, olddir.\r\n\r\n`delete` - File was deleted. Parameters: file.\r\n\r\n`update` - File was changed(renamed). Parameters: file.\r\n\r\n\r\n### mega.file(url | opt)\r\n\r\n```\r\nvar file = mega.file('https://mega....')\r\n```\r\n\r\nReturns file object based on download URL or options. Options can be `downloadId` and `key`.\r\n\r\n### File\r\n\r\n**Properties:**\r\n\r\n`name` - File name\r\n\r\n`attributes` - Object of attributes\r\n\r\n`size` - File size\r\n\r\n`key` - File key(buffer)\r\n\r\n`timestamp` - File creation time\r\n\r\n`nodeId` - File ID\r\n\r\n`downloadId` - Link ID to file. Only if created from link.\r\n\r\n`directory` - Boolean if file is directory.\r\n\r\n`children` - Array of files for directories.\r\n\r\n### file.download([cb])\r\n\r\nRead file contents.\r\n\r\n```\r\nfile.download().pipe(fs.createWriteStream('myfile.txt'))\r\n\r\nfile.download(function(err, data) {\r\n  // data is buffer\r\n})\r\n```\r\n\r\n### file.link([noKey], cb)\r\n\r\nMake download link for a file.\r\n\r\n```\r\nfile.link(function(err, url) {\r\n  // url: https://mega.co.nz/#!downloadId!key\r\n})\r\n```\r\n\r\n### file.delete(cb)\r\n\r\nDelete file permanently.\r\n\r\n```\r\nfile.delete(function(err) {\r\n  // deleted.\r\n})\r\n```\r\n\r\n### file.loadAttributes(cb)\r\n\r\nDownload and decrypt file attributes. Attributes normally contain file name(\"n\"), but it seems you can put anything you want in there.\r\n\r\nOnly makes sense when file is created from download link with `mega.file(url)`, otherwise attributes are already loaded/decrypted.\r\n\r\n```\r\nmega.file(url).loadAttributes(function(err, file) {\r\n  // file.name\r\n  // file.size\r\n  // file.attributes\r\n})\r\n```\r\n\r\n\r\n### Events:\r\n\r\nSame events as for Storage objects. Only trigger for a specific file.\r\n\r\n`move` - File was moved to another dir. Parameters: olddir.\r\n\r\n`delete` - File was deleted.\r\n\r\n`update` - File was changed(renamed).\r\n\r\n\r\n### mega.encrypt([key]) / mega.decrypt(key)\r\n\r\nLower level duplex streams. These could be used if you want to do network traffic and crypto on different time.\r\n\r\nTakes in encrypted file data and outputs decrypted data and vice versa. Also does MAC verification / generation.\r\n\r\nNote that if you specify key for `encrypt()` it needs to be 192bit. Other 64bit are for the MAC. You can later read the full key from the `key` property of the stream.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}